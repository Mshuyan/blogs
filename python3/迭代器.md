## 迭代器
我将从一个Python语言特性开始，这个特性是编写函数式程序的重要基础：迭代器。

迭代器是表示数据流的对象;这个对象一次返回一个元素的数据。 Python迭代器必须支持一个名为__next __（）的方法，它不接受任何参数，并且总是返回流的下一个元素。如果流中没有其他元素，__next __（）必须引发StopIteration异常。但是迭代器不一定是有限的，写一个产生无限数据流的迭代器是完全合理的。

内建的iter（）函数接受一个任意的对象，并尝试返回一个迭代器，它将返回对象的内容或元素，如果对象不支持迭代，则引发TypeError。 Python的一些内置数据类型支持迭代，最常见的是列表和字典。一个对象被称为iterable，如果你可以得到一个迭代器。

您可以手动尝试迭代界面：
```
>>> L = [1,2,3]
>>> it = iter(L)
>>> it
<...iterator object at ...>
>>> it.__next__()  # same as next(it)
1
>>> next(it)
2
>>> next(it)
3
>>> next(it)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration
>>>
```
Python期望在几个不同的上下文中迭代对象，最重要的是for语句。 在Y中的X语句中，Y必须是iter（）可以创建迭代器的迭代器或某个对象。 这两个陈述是等价的：
```
for i in iter(obj):
    print(i)

for i in obj:
    print(i)
```
通过使用list（）或tuple（）构造函数，可以将迭代器物化为列表或元组：
```
>>> L = [1,2,3]
>>> iterator = iter(L)
>>> a,b,c = iterator
>>> a,b,c
(1, 2, 3)
```
诸如max（）和min（）之类的内置函数可以接受一个迭代器参数，并返回最大或最小的元素。 “in”和“not in”运算符也支持迭代器：如果在迭代器返回的流中发现X，则迭代器中的X为真。 如果迭代器是无限的，你会遇到明显的问题。 max（），min（）永远不会返回，如果元素X从不出现在流中，那么“in”和“not in”运算符也不会返回。

请注意，您只能在迭代器中前进; 没有办法获得以前的元素，重置迭代器，或复制它。 迭代器对象可以选择提供这些额外的功能，但迭代器协议只指定__next __（）方法。 因此，函数可能会消耗迭代器的所有输出，如果需要对同一个流执行不同的操作，则必须创建一个新的迭代器。

#### 支持迭代器的数据类型
我们已经看到列表和元组如何支持迭代器。 事实上，任何Python序列类型（如字符串）都将自动支持迭代器的创建。

在字典上调用iter（）会返回一个遍历字典键的迭代器：
```
>>> m = {'Jan': 1, 'Feb': 2, 'Mar': 3, 'Apr': 4, 'May': 5, 'Jun': 6,
...      'Jul': 7, 'Aug': 8, 'Sep': 9, 'Oct': 10, 'Nov': 11, 'Dec': 12}
>>> for key in m:
...     print(key, m[key])
Mar 3
Feb 2
Aug 8
Sep 9
Apr 4
Jun 6
Jul 7
Jan 1
May 5
Nov 11
Dec 12
Oct 10
```
请注意，顺序基本上是随机的，因为它是基于字典中对象的哈希排序。

应用iter（）到字典总是循环遍历键，但字典有返回其他迭代器的方法。 如果要迭代值或键/值对，则可以显式调用values（）或items（）方法来获取适当的迭代器。

dict（）构造函数可以接受一个迭代器，它返回有限的（键，值）元组流：
```
>>> L = [('Italy', 'Rome'), ('France', 'Paris'), ('US', 'Washington DC')]
>>> dict(iter(L))
{'Italy': 'Rome', 'US': 'Washington DC', 'France': 'Paris'}
```
文件也通过调用readline（）方法来支持迭代，直到文件中没有更多的行。 这意味着你可以像这样读取文件的每一行：
```
for line in file:
    # do something for each line
    ...
```
集合可以从迭代中获取其内容，并让您遍历集合的元素：
```
S = {2, 3, 5, 7, 11, 13}
for i in S:
    print(i)
```
### 完全理解 Python 迭代对象、迭代器、生成器
http://python.jobbole.com/87805/

### Python3中的yield from语法
http://blog.theerrorlog.com/yield-from-in-python-3.html

### python 3.4 新加入的asyncio是咋通过yield from实现异步的？
https://www.zhihu.com/question/35401469
http://dabeaz.com/coroutines/
http://www.dabeaz.com/coroutines/Coroutines.pdf
http://blog.csdn.net/u014683535/article/details/51865880
